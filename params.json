{"name":"Signals-frontend","tagline":"Frontend of the SIA (Signalen Informatievoorziening Amsterdam)","body":"# Signalen\r\n\r\nThis project is based on the react boilerplate that was adapted for the needs of the municipality of Amsterdam.\r\nSee https://github.com/Amsterdam/react-boilerplate.git for more information on the react boilerplate\r\n\r\n## Requirements\r\n\r\n  -  npm >= 6.11\r\n  -  node 12.18\r\n\r\nThis project relies on the[ `leaflet-headless`](https://www.npmjs.com/package/leaflet-headless) package. On OSX, you'll need to have [`cairo`](https://formulae.brew.sh/formula/cairo), [`pango`](https://formulae.brew.sh/formula/pango) and [`cmake`](https://formulae.brew.sh/formula/cmake) installed.\r\n\r\n## Installation\r\n\r\n  -  npm install\r\n\r\n## Configuration\r\n\r\nConfiguration for theming, map and API endpoint URLs is defined in\r\n`environment.conf.json`.\r\n\r\n## Development\r\n\r\nTo overwrite some configuration for development purposes you can define them in\r\n`environment.conf.development.json`. This file is ignored by git.\r\n\r\nThe SPA will run over HTTP on `localhost` at port `3001`. The port can be configured by setting the environment variable `PORT`.\r\n\r\n    npm start\r\n\r\n    PORT=8000 npm start\r\n\r\nDo note that the application uses an external authentication service that does not accept any port. The whitelisted ports are `3000` and `3001`\r\n\r\n### HTTPS\r\n\r\nThe application's production build uses a [serviceworker](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) that is configured through the Webpack Offline plugin (see [webpack config](./internals/webpack/webpack.prod.babel.js)) and is installed in [app.js](./src/app.js).\r\n\r\nTo run the application with the production code and have the serviceworker available, the site needs to be run over HTTPS. This can be accomplished by running\r\n\r\n    HTTPS=true npm run start:prod\r\n\r\n## Testing\r\n\r\nBy default, the unit test generates a coverage report (thresholds are set in [jest.config.js](./jest.config.js)).\r\n\r\nRunning all tests and generate the coverage report:\r\n\r\n    npm test\r\n\r\n## Deployment\r\n\r\nWhen deploying the docker container, there are some files you can overwrite for\r\nbranding purposes.\r\n\r\n- `environment.conf.json` with configuration for theming and endpoint URLs.\r\n- The logo, as defined by `logo.url` in `environment.conf.json`.\r\n- `favicon.png` the favicon, needs to be a PNG.\r\n- `manifest.json` with configuration for the PWA.\r\n- `icon_...x....png` the icons for the PWA in various sizes, need to be PNGs.\r\n\r\nThe logo displayed on the website is defined by the `logo.url` parameter in\r\n`environment.conf.json`. This can be a remote URL or a local file path. Define\r\nfor instance `/logo.svg` and you can inject your own `logo.svg` when starting\r\nthe docker container.\r\n\r\nThe `manifest.json` file for the PWA is generated by webpack, but you can\r\noverwrite it with your own configuration. This file also defines some icons,\r\nwhich, in turn, can be injected into the container as well.\r\n\r\nThere is an icon for android of 192 x 192 pixels in size, defined in\r\n`manifest.json`. For iOS there's an icon of 180 x 180 pixels in size, this is\r\ndefined directly in `index.html`. All icons have to be PNGs. The icon for iOS\r\nmust not contain transparency.\r\n\r\nSee also\r\nhttps://stackoverflow.com/questions/2997437/what-size-should-apple-touch-icon-png-be-for-ipad-and-iphone?answertab=votes#tab-top\r\nand\r\nhttps://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html.\r\n\r\nAn example command for running the container and injecting some files:\r\n\r\n    docker run -d -p 8080:80 \\¬\r\n      -v /branding/config.json:/environment.conf.json \\¬\r\n      -v /branding/logo.png:/usr/share/nginx/html/logo.png \\¬\r\n      -v /branding/favicon.png:/usr/share/nginx/html/favicon.png \\¬\r\n      -v /branding/android.png:/usr/share/nginx/html/icon_192x192.png \\¬\r\n      -v /branding/ios.png:/usr/share/nginx/html/icon_180x180.png \\¬\r\n      signalen/frontend¬\r\n\r\n## Docs\r\n\r\n[Architectural decision records](https://amsterdam.github.io/signals-frontend/docs/adr)","note":"Don't delete this file! It's used internally to help with page regeneration."}